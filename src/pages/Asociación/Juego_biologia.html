<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Juego de Asociación de Biología</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#1E6F5C",
              secondary: "#289672",
              accent: "#29BB89",
              light: "#E6DD3B",
              dark: "#1A5653",
            },
          },
        },
      };
    </script>
    <!-- Fuente Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/src/style.css" />

    <style>
      /* Estilo para los puntos de interés (hotspots) */
      @keyframes pulse {
        0%,
        100% {
          transform: translate(-50%, -50%) scale(1);
          opacity: 0.8;
        }
        50% {
          transform: translate(-50%, -50%) scale(1.3);
          opacity: 1;
        }
      }

      .hotspot {
        position: absolute;
        width: 24px;
        height: 24px;
        background-color: #ef4444; /* Rojo */
        border: 2px solid white;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.2s ease-in-out;
        animation: pulse 2s infinite;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 14px;
        transform: translate(-50%, -50%);
      }

      .hotspot:hover {
        animation-play-state: paused;
        transform: translate(-50%, -50%) scale(1.5);
        background-color: #dc2626; /* Rojo más oscuro */
      }

      /* Estado "contestado" para el hotspot */
      .hotspot.answered {
        background-color: #22c55e; /* Verde */
        animation: none;
        opacity: 0.9;
        cursor: default;
      }
      .hotspot.answered:hover {
        transform: translate(-50%, -50%) scale(1);
        background-color: #22c55e;
      }

      body {
        font-family: "Inter", sans-serif;
      }
    </style>
  </head>
  <body class="bg-gray-50 font-sans">
    <div id="header-root"></div>
    <div
      id="rules-modal"
      class="fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50"
    >
      <div class="bg-white rounded-lg p-6 w-full max-w-md shadow-xl">
        <h3 class="text-xl font-bold mb-4 text-gray-900">Cómo jugar</h3>
        <div class="text-gray-700 space-y-2">
          <p>Elige un nivel y observa la imagen.</p>
          <p>Haz clic en un punto para responder qué parte es.</p>
          <p>Lee la descripción al acertar y suma puntos.</p>
          <p>Completa todos los puntos para terminar el nivel.</p>
        </div>
        <button
          id="rules-close"
          class="mt-6 w-full bg-primary hover:bg-dark text-white font-semibold py-2 px-4 rounded-lg"
        >
          Entendido
        </button>
      </div>
    </div>
    <main class="min-h-[70vh] flex items-center justify-center p-4">
      <div
        id="game-container"
        class="bg-white rounded-xl shadow-2xl w-full max-w-4xl overflow-hidden mx-auto"
      >
        <!-- Encabezado con título y selección de nivel -->
        <header class="p-5 bg-blue-700 text-white">
          <h1 class="text-3xl font-bold text-center mb-4">
            Juego de Asociación de Biología
          </h1>
          <div id="level-select" class="flex flex-wrap gap-3 justify-center">
            <!-- Los botones de nivel se insertarán aquí con JS -->
          </div>
        </header>

        <!-- Título del Nivel Actual -->
        <h2
          id="level-title"
          class="text-2xl font-bold text-center p-4 text-gray-800"
        ></h2>

        <!-- Área del Juego (Imagen y Hotspots) -->
        <div id="game-area" class="p-4 relative min-h-[400px]">
          <img
            id="game-image"
            src=""
            alt="Diagrama de biología"
            class="w-full h-auto max-h-[60vh] object-contain rounded-md mx-auto"
            onerror="this.src='https://placehold.co/800x600/e0e0e0/757575?text=Cargando+Imagen...'"
          />
          <div
            id="hotspot-container"
            class="absolute top-0 left-0 w-full h-full"
          >
            <!-- Los hotspots se insertarán aquí con JS -->
          </div>
        </div>

        <!-- Visualización del Puntaje -->
        <footer class="bg-gray-100 p-4 border-t border-gray-200">
          <div
            id="score-display"
            class="text-center font-bold text-xl text-gray-700"
          >
            Puntaje: 0 / 0
          </div>
        </footer>
        <section class="p-4">
          <div id="quiz-section" class="bg-white rounded-lg shadow-md p-4">
            <h3 class="text-lg font-semibold text-primary mb-2">
              Quiz (2 puntos)
            </h3>
            <div id="quiz-container" class="space-y-3"></div>
            <div class="mt-3 flex items-center gap-3">
              <button
                id="quiz-submit"
                class="px-3 py-2 rounded bg-primary text-white"
              >
                Enviar
              </button>
              <span id="quiz-score" class="text-sm text-gray-700"></span>
            </div>
          </div>
        </section>
      </div>
    </main>
    <div id="footer-root"></div>

    <!-- Modal para las Preguntas -->
    <div
      id="question-modal"
      class="fixed inset-0 bg-black/60 flex items-center justify-center p-4 hidden z-50"
    >
      <div
        class="bg-white rounded-lg p-6 w-full max-w-md shadow-xl transform transition-all scale-95 opacity-0"
        id="modal-content"
      >
        <h3
          id="question-text"
          class="text-xl font-semibold mb-5 text-center text-gray-900"
        >
          ¿Qué parte es esta?
        </h3>
        <div
          id="options-container"
          class="grid grid-cols-1 sm:grid-cols-2 gap-3"
        >
          <!-- Las opciones de respuesta se insertarán aquí con JS -->
        </div>
        <div
          id="feedback-text"
          class="mt-4 p-3 rounded-md text-center font-medium"
        ></div>
      </div>
    </div>

    <script type="module" src="/src/js/app.js"></script>
    <script type="module" src="./juego_biologia.js"></script>
  </body>
</html>
